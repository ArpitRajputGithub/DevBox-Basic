# DevBox Zsh Configuration
# This file is sourced by ~/.zshrc

# Set theme
ZSH_THEME="robbyrussell"

# Oh My Zsh plugins
plugins=(
    git
    zsh-autosuggestions
    zsh-syntax-highlighting
    docker
    npm
    node
    vscode
)

# Load Oh My Zsh
export ZSH="$HOME/.oh-my-zsh"
source $ZSH/oh-my-zsh.sh

# DevBox specific configurations
export DEVBOX_HOME="$HOME/.devbox"
export PATH="$DEVBOX_HOME/scripts:$PATH"

# Load DevBox aliases
if [[ -f "$DEVBOX_HOME/config/aliases.sh" ]]; then
    source "$DEVBOX_HOME/config/aliases.sh"
fi

# Node.js version management
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"

# Development environment variables
export NODE_ENV=development
export EDITOR="code"

# History configuration
HISTSIZE=10000
SAVEHIST=10000
HISTFILE=~/.zsh_history
setopt SHARE_HISTORY

# Better directory navigation
setopt AUTO_CD
setopt AUTO_PUSHD
setopt PUSHD_IGNORE_DUPS

# Completion
autoload -U compinit
compinit

# Key bindings
bindkey '^[[A' history-substring-search-up
bindkey '^[[B' history-substring-search-down

# Custom prompt
PROMPT='%{$fg[green]%}%n@%m%{$reset_color%}:%{$fg[blue]%}%~%{$reset_color%}$(git_prompt_info)$(git_prompt_status)%{$fg[red]%}%{$reset_color%} $ '

# Git prompt configuration
ZSH_THEME_GIT_PROMPT_PREFIX="%{$fg[red]%}("
ZSH_THEME_GIT_PROMPT_SUFFIX=")%{$reset_color%} "
ZSH_THEME_GIT_PROMPT_DIRTY="%{$fg[red]%} ‚úó"
ZSH_THEME_GIT_PROMPT_CLEAN="%{$fg[green]%} ‚úì"

# Development functions
function devbox-status() {
    echo "üõ†Ô∏è  DevBox Status:"
    echo "   Node.js: $(node --version)"
    echo "   npm: $(npm --version)"
    echo "   Git: $(git --version)"
    echo "   Zsh: $(zsh --version)"
    echo "   DevBox Home: $DEVBOX_HOME"
}

function devbox-update() {
    echo "üîÑ Updating DevBox..."
    cd "$DEVBOX_HOME"
    git pull origin main
    echo "‚úÖ DevBox updated!"
}

function devbox-help() {
    echo "üõ†Ô∏è  DevBox Help:"
    echo ""
    echo "Quick Commands:"
    echo "  devbox-status    - Show DevBox status"
    echo "  devbox-update    - Update DevBox"
    echo "  devbox-help      - Show this help"
    echo "  create-react-app <name> - Create React app"
    echo "  create-node-api <name>  - Create Node.js API"
    echo ""
    echo "Aliases:"
    echo "  gs, ga, gc, gp  - Git shortcuts"
    echo "  dev, start, build, test - npm shortcuts"
    echo "  .., ..., ....   - Navigation shortcuts"
    echo ""
    echo "Documentation: https://docs.devbox.dev"
} 